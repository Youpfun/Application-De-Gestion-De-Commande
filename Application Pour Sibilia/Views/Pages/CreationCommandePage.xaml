<Page
    x:Class="Application_Pour_Sibilia.Views.Pages.CreationCommandePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Application_Pour_Sibilia.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="DashboardPage"
    d:DataContext="{d:DesignInstance local:CreationCommandePage,IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    mc:Ignorable="d">

    <Grid>
        <Grid Margin="20,20,20,160">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Left Section -->
            
            <StackPanel Grid.Column="0">
                <TextBlock Text="Recherche de produit" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10" />
                <ui:TextBox Width="300" 
                            x:Name="txtRecherche" 
                            PlaceholderText="Entrée un mot-clé"
                            Text="{Binding MotCleRecherche, UpdateSourceTrigger=PropertyChanged}" 
                            MinWidth="300" 
                            Height="30" 
                            Padding="10,8,10,8" 
                            FontSize="11" 
                            Margin="0,0,0,0" 
                            HorizontalAlignment="Left" />

                <StackPanel Orientation="Horizontal" Margin="0,10">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel>
                            <StackPanel Orientation="Vertical" Width="150" Height="60" VerticalAlignment="Top">
                                <Label Content="Catégorie :" VerticalAlignment="Center" />
                                <ComboBox ItemsSource="{Binding LesCategories}" 
                                    DisplayMemberPath="NomCategorie" 
                                    SelectedItem="{Binding SelectedCategorie, Mode=TwoWay}">
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Margin="0,20,0,0">
                                <Label Content="Prix :" VerticalAlignment="Center"/>
                                <ui:NumberBox x:Name="PrixRecherche"
                                              Value="{Binding MotCleRecherchePrix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                              VerticalAlignment="Center">
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel Margin="0,10,0,0">
                                <Button Content="Filtrer" 
                                        Command="{Binding FiltrerPlatsCommand}" 
                                        Background="#B2627272"/>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel>
                        <StackPanel Margin="10,0,0,0" Height="60" VerticalAlignment="Top">
                            <Label Content="Sous-catégorie :" VerticalAlignment="Center" />
                            <ComboBox Width="150" 
                                    ItemsSource="{Binding LesSousCategories}" 
                                    DisplayMemberPath="NomSousCategorie" 
                                    SelectedItem="{Binding SelectedSousCategorie, Mode=TwoWay}" >
                            </ComboBox>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" Margin="10,20,0,0">
                            <Label Content="Période :" VerticalAlignment="Center"/>
                                <ComboBox Width="150" 
                                          ItemsSource="{Binding LesPeriodes}"
                                          Text="{Binding MotCleRecherchePeriode, UpdateSourceTrigger=PropertyChanged}"/>
                        </StackPanel>
                            <StackPanel Margin="10,0,0,0">
                                <Button Content="Réinitialiser" 
                                        Command="{Binding ReinitialiserFiltresCommand}" 
                                        Margin="0,10,0,0"
                                        Background="#B2627272"/>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Margin="10,0,0,0">
                            <StackPanel Orientation="Vertical" Width="150" Height="60" VerticalAlignment="Top">
                                <Label Content="Quantité :" VerticalAlignment="Center" />
                                <ui:NumberBox Width="150" MinWidth="150" />
                            </StackPanel>
                            <StackPanel Margin="0,45,0,0">
                                <Button x:Name="buttonAjouterACommande" 
                                        Content="Ajouter" 
                                        Background="#FF4DD04D" 
                                        Foreground="White" 
                                        HorizontalAlignment="Stretch" 
                                        Height="32" 
                                        VerticalAlignment="Stretch" />
                            </StackPanel>
                            <StackPanel>
                                <Button Content="Voir détails" 
                                        Background="#FF3760B7" 
                                        Foreground="White" 
                                        HorizontalAlignment="Stretch" 
                                        Height="32" 
                                        VerticalAlignment="Stretch" Margin="0,13,0,0" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
                
                <!-- Produits List -->
                
            </StackPanel>

            <!-- Right Section - Info Commande -->
            <StackPanel x:Name="spInfoCommande" Grid.Column="1" Margin="10,0,0,0" >
                <TextBlock Text="Commande actuelle" FontSize="22" FontWeight="SemiBold" Margin="0,0,0,0" HorizontalAlignment="Center" />
                <Border BorderBrush="Gray" BorderThickness="1" Padding="10">
                    <StackPanel>
                        <Grid x:Name="gridNomsColonnes">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="PLATS" FontWeight="Bold" Grid.Column="0" HorizontalAlignment="Center" />
                            <TextBlock Text="POIDS" FontWeight="Bold" Grid.Column="1" HorizontalAlignment="Center" />
                            <TextBlock Text="Prix TTC" FontWeight="Bold" Grid.Column="2" HorizontalAlignment="Center" />
                        </Grid>
                        <Separator />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <StackPanel x:Name="spNomPlat" Orientation="Vertical" Grid.Column="0">
                                <TextBlock Text="Terrine de porc"/>
                                <TextBlock Text="Jambon" />
                                <TextBlock Text="Saucisse" />
                            </StackPanel>
                            <StackPanel x:Name="spPoids" Orientation="Vertical" Grid.Column="1" HorizontalAlignment="Center">
                                <TextBlock Text="500g" />
                                <TextBlock Text="250g" />
                                <TextBlock Text="100g" />
                            </StackPanel>
                            <StackPanel x:Name="spPrix" Orientation="Vertical" Grid.Column="2" HorizontalAlignment="Center">
                                <TextBlock Text="166€"/>
                                <TextBlock Text="200€"/>
                                <TextBlock Text="300€"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                <TextBlock Text="Total TTC : 666€" FontSize="18" FontWeight="SemiBold" Margin="0,10,0,0" HorizontalAlignment="Center" />
                <Button Content="Valider la commande" Background="Red" Foreground="White" Margin="0,20,0,0" Height="40" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Stretch" />
            </StackPanel>
            
        </Grid>
        <ui:DataGrid Margin="20,290,20,20" ItemsSource="{Binding LesPlats}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn  
                    Width="150"
                    Binding="{Binding NomPlat, ValidatesOnExceptions=True}"
                    Header="Nom du Plat" />
                <DataGridTextColumn  
                    Width="Auto"
                    Binding="{Binding PrixUnitaire, ValidatesOnExceptions=True, StringFormat=C2}"
                    Header="Prix Unitaire" />
                <DataGridTextColumn  
                    Width="Auto"
                    Binding="{Binding DelaiPreparation, ValidatesOnExceptions=True}"
                    Header="Délai Préparation" CanUserResize="True" />
                <DataGridTextColumn  
                    Width="Auto"
                    Binding="{Binding NbPersonnes, ValidatesOnExceptions=True}"
                    Header="Nb Personnes" />
                <DataGridTextColumn  
                    Width="Auto"
                    Binding="{Binding NomSousCategorie, ValidatesOnExceptions=True}"
                    Header="Sous-Catégorie" />
                <DataGridTextColumn Width="Auto" Binding="{Binding NomPeriode, ValidatesOnExceptions=True}" Header="Période">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding EstDisponible}" Value="True">
                                    <Setter Property="Background" Value="#FF15C11C"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding EstDisponible}" Value="False">
                                    <Setter Property="Background" Value="Red"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </ui:DataGrid>
    </Grid>
</Page>
