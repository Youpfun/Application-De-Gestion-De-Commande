<Page x:Class="Application_Pour_Sibilia.Views.Pages.GestionDesPlatsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Application_Pour_Sibilia.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="GestionDesPlatsPage"
    d:DataContext="{d:DesignInstance local:GestionDesPlatsPage,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    mc:Ignorable="d">

    <Grid>
        <StackPanel>

            <ui:Button Width="334" Height="40"
               FontSize="16" FontWeight="Bold"
               Background="#D0021B" Foreground="White"
               VerticalAlignment="Top" Margin="0,0,0,0"
               Command="{Binding AjouterPlatCommand}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="&#xE710;" FontFamily="Segoe MDL2 Assets" FontSize="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock Text="Ajouter un plat" VerticalAlignment="Center"/>
                </StackPanel>
            </ui:Button>

            <Separator Margin="0,10" Background="{DynamicResource SystemAccentColorLight3}" Width="400" HorizontalAlignment="Left" />

            <ui:AutoSuggestBox PlaceholderText="Search..." Margin="0,20,0,0" VerticalAlignment="Top" 
                               Width="300" Height="35" HorizontalAlignment="Left"/>

            <DataGrid x:Name="PlatsDataGrid"
              ItemsSource="{Binding Plats}"
              AutoGenerateColumns="False"
              HeadersVisibility="Column"
              RowHeight="50"
              CanUserAddRows="False"
              CanUserDeleteRows="False"
              IsReadOnly="True"
              GridLinesVisibility="None"
              ColumnHeaderHeight="40"
              BorderThickness="0"
              Background="Transparent">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="*" />
                    <DataGridTextColumn Header="Catégorie" Binding="{Binding Categorie}" Width="*" />
                    <DataGridTextColumn Header="Sous-catégorie" Binding="{Binding SousCategorie}" Width="*" />
                    <DataGridTextColumn Header="Disponibilité" Binding="{Binding Disponibilite}" Width="*" />

                    <!-- Colonne icônes -->
                    <DataGridTemplateColumn Header="Actions" Width="120">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,0">

                                    <!-- Icône Modifier -->
                                    <TextBlock Text="&#xE104;" 
                                               FontFamily="Segoe MDL2 Assets" 
                                               FontSize="16" 
                                               Foreground="#2196F3"
                                               Cursor="Hand"
                                               ToolTip="Modifier"
                                               Margin="8,0"
                                               VerticalAlignment="Center">
                                        <TextBlock.InputBindings>
                                            <MouseBinding Command="{Binding DataContext.ModifierPlatCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                                          CommandParameter="{Binding}"
                                                          MouseAction="LeftClick"/>
                                        </TextBlock.InputBindings>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="#1976D2"/>
                                                        <Setter Property="RenderTransform">
                                                            <Setter.Value>
                                                                <ScaleTransform ScaleX="1.1" ScaleY="1.1"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <!-- Icône Supprimer -->
                                    <TextBlock Text="&#xE107;" 
                                               FontFamily="Segoe MDL2 Assets" 
                                               FontSize="16" 
                                               Foreground="#F44336"
                                               Cursor="Hand"
                                               ToolTip="Supprimer"
                                               Margin="8,0"
                                               VerticalAlignment="Center">
                                        <TextBlock.InputBindings>
                                            <MouseBinding Command="{Binding DataContext.SupprimerPlatCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                                          CommandParameter="{Binding}"
                                                          MouseAction="LeftClick"/>
                                        </TextBlock.InputBindings>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="#D32F2F"/>
                                                        <Setter Property="RenderTransform">
                                                            <Setter.Value>
                                                                <ScaleTransform ScaleX="1.1" ScaleY="1.1"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>

        </StackPanel>

    </Grid>
</Page>